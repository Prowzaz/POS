<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ | ‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà‡∏ó‡πâ‡∏≤‡∏¢‡∏ã‡∏≠‡∏¢‡πÑ‡∏≠‡∏¢‡∏£‡∏≤ 21</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* Animation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }
        
        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô */
        #payment-confirmed-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        #payment-confirmed-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        #payment-confirmed-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        /* ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô */
        .payment-status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .payment-status-indicator.paid {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .payment-status-indicator.pending {
            background: #fff3cd;
            color: #856404;
            border: 2px solid #ffeeba;
        }
    </style>
</head>
<body>
    <header class="header">
        <a href="index.html" class="logo-area">
            <img src="img/demologo.png" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå" class="header-img">
            <span class="header-text">‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà‡∏ó‡πâ‡∏≤‡∏¢‡∏ã‡∏≠‡∏¢‡πÑ‡∏≠‡∏¢‡∏£‡∏≤ 21</span>
        </a>
        <nav class="header-nav">
            <ul>
                <li><a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
                <li><a href="about.html">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a></li>
                <li><a href="services.html">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</a></li>
                <li><a href="contact.html">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a></li>
            </ul>
        </nav>
    </header>

    <main class="checkout-page">
        <h1 class="section-title">‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h1>

        <section class="checkout-card">
            <h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
            <div id="summary-items-list"></div>
            
            <div class="promo-code-container">
                <input type="text" id="promo-code-input" placeholder="‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô">
                <button type="button" id="apply-promo-btn">‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</button>
            </div>

            <div class="price-summary">
                <div class="price-row">
                    <span>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£</span>
                    <span id="subtotal-price">0‡∏ø</span>
                </div>
                <div class="price-row" id="discount-row" style="display: none;">
                    <span>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</span>
                    <span id="discount-amount">-0‡∏ø</span>
                </div>
                <div class="price-row total">
                    <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                    <span id="total-price">0‡∏ø</span>
                </div>
            </div>
        </section>

        <section class="checkout-card">
            <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
            <form id="checkout-form">
                <div class="form-group">
                    <label for="name">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö</label>
                    <input type="text" id="name" required placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö">
                </div>
                <div class="form-group">
                    <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                    <input type="tel" id="phone" required placeholder="0XX-XXX-XXXX">
                </div>
            </form>
        </section>

        <section class="checkout-card">
            <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h2>
            <div class="payment-options">
                <label class="payment-option">
                    <input type="radio" name="payment" value="promptpay" checked>
                    <i class="fas fa-qrcode"></i>
                    <span>PromptPay QR Code</span>
                </label>
            </div>
        </section>

        <button type="submit" form="checkout-form" class="cta-button" id="submit-btn">
            <i class="fas fa-check-circle"></i> ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
        </button>
    </main>

    <!-- QR Code Modal -->
    <div id="qr-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2><i class="fas fa-qrcode"></i> ‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h2>
            
            <div id="qrcode-container"></div>
            
            <button id="payment-confirmed-btn">
                <i class="fas fa-check"></i> ‡∏Å‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß
            </button>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="order-success-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content success-modal">
            <i class="fas fa-check-circle success-icon"></i>
            <h2>‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h2>
            <p>‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç: <strong id="order-number-span">A000</strong></p>
            <p class="success-note">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏ß‡πâ<br>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å...</p>
        </div>
    </div>

    <!-- Payment Timer -->
    <div id="payment-timer-container">
        <div class="timer-content">
            <div class="timer-text-group">
                <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</p>
                <div id="countdown-timer">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô: 05:00</div>
            </div>
            <button id="cancel-order-btn" class="cancel-btn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
        </div>
    </div>
    
    <!-- ‡πÇ‡∏´‡∏•‡∏î Scripts ‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á -->
    <!-- 1. API Helper ‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Å‡πà‡∏≠‡∏ô -->
    <script src="api.js"></script>
    
    <!-- 2. QR Code Library - ‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£ -->
    <script>
        // Load QR Code library with multiple fallbacks
        function loadQRCodeLibrary() {
            return new Promise((resolve, reject) => {
                // Try first CDN
                const script1 = document.createElement('script');
                script1.src = 'https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js';
                script1.onload = function() {
                    window.QRCode = window.qrcode;
                    console.log('‚úÖ QR Code library loaded from unpkg');
                    resolve();
                };
                script1.onerror = function() {
                    console.warn('‚ö†Ô∏è First CDN failed, trying second...');
                    
                    // Try second CDN
                    const script2 = document.createElement('script');
                    script2.src = 'https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js';
                    script2.onload = function() {
                        console.log('‚úÖ QR Code library loaded from cdnjs');
                        resolve();
                    };
                    script2.onerror = function() {
                        console.error('‚ùå All CDNs failed');
                        reject(new Error('Failed to load QR Code library'));
                    };
                    document.head.appendChild(script2);
                };
                document.head.appendChild(script1);
            });
        }
        
        // Load QR Code library immediately
        loadQRCodeLibrary().catch(console.error);
    </script>
    
    <!-- 3. QR Generator - ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß -->
    <script src="qr-generator-v2.js"></script>
    
    <!-- 4. Checkout Script (‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏•‡∏±‡∏á‡∏™‡∏∏‡∏î) -->
    <script src="checkout.js"></script>
    
    <!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î -->
    <script>
        window.addEventListener('load', function() {
            console.log('üîç System Check:');
            console.log('‚úì API Helper:', typeof window.API !== 'undefined' ? 'OK' : 'FAILED');
            console.log('‚úì QRCode library:', typeof QRCode !== 'undefined' ? 'OK' : 'FAILED');
            console.log('‚úì generatePromptPayQR:', typeof generatePromptPayQR !== 'undefined' ? 'OK' : 'FAILED');
            
            // Auto-retry loading if failed
            if (typeof QRCode === 'undefined') {
                console.log('üîÑ Retrying QR Code library load...');
                loadQRCodeLibrary().then(() => {
                    console.log('‚úÖ QR Code library loaded successfully on retry');
                }).catch(() => {
                    console.error('‚ùå QR Code library still failed to load');
                });
            }
        });
    </script>
</body>
</html>
